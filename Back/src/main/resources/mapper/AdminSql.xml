<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hire.it.mapper.AdminMapper">
	<select id="getMemberCount" resultType="Integer">
		SELECT COUNT(*)
		FROM user
		WHERE role &gt; 0
		GROUP BY role
		ORDER BY role
	</select>
	<select id="getJobPostingCount" resultType="int">
		SELECT COUNT(*)
		FROM job_posting
	</select>
	<select id="getApplyCount" resultType="int">
		SELECT COUNT(*)
		FROM apply
	</select>
	<select id="getEmpRate" resultType="double">
		SELECT (SELECT COUNT(*)
				FROM apply
				WHERE progress = 3)
				/ COUNT(*)
		FROM apply
	</select>
	<select id="getMemberList" resultType="user">
		SELECT *
		FROM user
	</select>
	<select id="getCorpApplication" resultType="alarm">
		SELECT *
		FROM alarm
		WHERE user_id = 'admin'
		AND apply_num = 0
	</select>
	<delete id="applyHandle" parameterType="int">
		DELETE
		FROM alarm
		WHERE num = #{num}
	</delete>
	<update id="changeRole" parameterType="int">
		UPDATE user
		SET role = '2'
		WHERE user_id = #{idx}
	</update>
	<update id="changeAuth" parameterType="int">
		UPDATE user_authority
		SET authority_name = 'ROLE_CORP'
		WHERE user_id = #{idx}
	</update>
</mapper>